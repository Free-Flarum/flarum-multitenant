module.exports=function(t){var n={};function a(o){if(n[o])return n[o].exports;var e=n[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=t,a.c=n,a.d=function(t,n,o){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)a.d(o,e,function(n){return t[n]}.bind(null,e));return o},a.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="",a(a.s=13)}([function(t,n){t.exports=flarum.core.compat["common/Model"]},function(t,n,a){"use strict";function o(t,n){return(o=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function e(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n)}a.d(n,"a",(function(){return e}))},function(t,n){t.exports=flarum.core.compat["common/components/Button"]},function(t,n,a){"use strict";a.d(n,"a",(function(){return i}));var o=a(1),e=a(0),r=a.n(e),i=function(t){function n(){for(var n,a=arguments.length,o=new Array(a),e=0;e<a;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).code=r.a.attribute("code"),n.hasUsagesLeft=r.a.attribute("hasUsagesLeft"),n.canUse=r.a.attribute("canUse"),n.usageCount=r.a.attribute("usageCount"),n.maxUsage=r.a.attribute("maxUsage"),n.createdAt=r.a.attribute("createdAt",r.a.transformDate),n.group=r.a.hasOne("group"),n}return Object(o.a)(n,t),n.prototype.apiEndpoint=function(){return"/group-invitations"+(this.exists?"/"+this.data.id:"")},n}(r.a)},function(t,n){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,n){t.exports=flarum.core.compat["common/components/GroupBadge"]},function(t,n){t.exports=flarum.core.compat["common/models/Group"]},,,,,function(t,n){t.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(t,n){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,n,a){"use strict";a.r(n);var o=a(3),e=a(1),r=a(2),i=a.n(r),u=a(5),s=a.n(u),c=a(4),p=a.n(c),l=a(11),d=a.n(l),f=a(6),g=a.n(f),h=a(12),v=a.n(h),b=function(){function t(){}return t.prototype.view=function(t){var n=t.attrs,a=n.onchange,o=n.value;return m("span.Select",[m("select.Select-input.FormControl",{onchange:function(t){a(t.target.value)},value:o},[m("option",{value:"",disabled:!0,hidden:!0},app.translator.trans("clarkwinkelmann-group-invitation.admin.settings.placeholder.group")),app.store.all("groups").filter((function(t){return-1===[g.a.GUEST_ID,g.a.MEMBER_ID].indexOf(t.id())})).map((function(t){return m("option",{value:t.id()},t.namePlural())}))]),v()("fas fa-sort",{className:"Select-caret"})])},t}(),y="clarkwinkelmann-group-invitation.admin.settings.",w=function(t){function n(){return t.apply(this,arguments)||this}Object(e.a)(n,t);var a=n.prototype;return a.oninit=function(n){var a=this;t.prototype.oninit.call(this,n),this.invitations=null,app.store.find("group-invitations").then((function(t){a.invitations=t,m.redraw()})),this.loading=!1,this.newInvitationGroupId="",this.newInvitationMaxUsage=""},a.content=function(){var t=this;return m(".ExtensionPage-settings.GroupInvitationSettingsPage",m(".container",[m("table",[m("thead",m("tr",[m("th",app.translator.trans(y+"head.code")),m("th",app.translator.trans(y+"head.group")),m("th",app.translator.trans(y+"head.usage")),m("th")])),m("tbody",[null===this.invitations?m("tr",m("td",p.a.component())):[this.invitations.map((function(n,a){return m("tr",[m("td",m("a",{href:app.forum.attribute("baseUrl")+"/get-role/"+n.code(),target:"_blank"},m("code",n.code()))),m("td",[s.a.component({group:n.group()})," ",n.group().namePlural()]),m("td",n.usageCount()+"/"+(null===n.maxUsage()?app.translator.trans(y+"unlimited"):n.maxUsage())),m("td",i.a.component({className:"Button Button--danger",onclick:function(){t.loading=!0,n.delete().then((function(){t.loading=!1,t.invitations.splice(a,1),m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:t.loading},app.translator.trans(y+"delete")))])})),0===this.invitations.length?m("tr.NoResultRow",m("td",{colspan:4},m("em",app.translator.trans(y+"empty")))):null],m("tr",[m("td",m("em",app.translator.trans(y+"placeholder.code"))),m("td",m(b,{onchange:function(n){t.newInvitationGroupId=n},value:this.newInvitationGroupId})),m("td",m("input.FormControl",{type:"number",min:"0",onchange:function(n){var a=n.target.value;t.newInvitationMaxUsage="0"===a?"":a},value:this.newInvitationMaxUsage,placeholder:app.translator.trans(y+"placeholder.usage")})),m("td",i.a.component({className:"Button Button--primary",onclick:function(){t.loading=!0,app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/group-invitations",body:{groupId:t.newInvitationGroupId,maxUsage:t.newInvitationMaxUsage}}).then((function(n){t.loading=!1,t.invitations.push(app.store.pushPayload(n)),t.newInvitationGroupId="",t.newInvitationMaxUsage="",m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:this.loading,disabled:!this.newInvitationGroupId},app.translator.trans(y+"create")))])])])]))},n}(d.a);app.initializers.add("clarkwinkelmann-group-invitation",(function(){app.store.models["group-invitations"]=o.a,app.extensionData.for("clarkwinkelmann-group-invitation").registerPage(w).registerPermission({icon:"fas fa-certificate",label:app.translator.trans("clarkwinkelmann-group-invitation.admin.permissions.use"),permission:"clarkwinkelmann-group-invitation.use"},"start")}))}]);
//# sourceMappingURL=admin.js.map