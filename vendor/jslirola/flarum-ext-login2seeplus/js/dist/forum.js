module.exports=function(e){var n={};function r(o){if(n[o])return n[o].exports;var t=n[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=e,r.c=n,r.d=function(e,n,o){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)r.d(o,t,function(n){return e[n]}.bind(null,t));return o},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=10)}([function(e,n){e.exports=flarum.core.compat.app},function(e,n){e.exports=flarum.core.compat.extend},,function(e,n){e.exports=flarum.core.compat["components/CommentPost"]},function(e,n){e.exports=flarum.core.compat["components/LogInModal"]},function(e,n){e.exports=flarum.core.compat["components/HeaderPrimary"]},function(e,n){e.exports=flarum.core.compat["components/SignUpModal"]},,,,function(e,n,r){"use strict";r.r(n);var o=r(1),t=r(0),a=r.n(t),i=r(3),l=r.n(i),s=r(5),u=r.n(s),c=r(4),p=r.n(c),f=r(6),d=r.n(f);a.a.initializers.add("jslirola-login2seeplus",(function(){var e,n,r,t,i;function s(e){var n=document.createElement("a");return n.setAttribute("class","l2sp"),n.innerHTML=a.a.translator.trans(e),n.outerHTML}Object(o.extend)(u.a.prototype,"oninit",(function(){n=parseInt(a.a.forum.attribute("jslirola.login2seeplus.post")||100),isNaN(n)&&(n=-1),r=JSON.parse(a.a.forum.attribute("jslirola.login2seeplus.link")||1),t=JSON.parse(a.a.forum.attribute("jslirola.login2seeplus.image")||0),i=JSON.parse(a.a.forum.attribute("jslirola.login2seeplus.code")||0),e=JSON.parse(a.a.forum.attribute("jslirola.login2seeplus.php")||0)})),Object(o.extend)(l.a.prototype,"content",(function(o){if(!a.a.session.user&&!this.isEditing()&&!e){var l,u,c=o[1].children[0].children,p=!1;if(-1!=n&&(l=c,(u=document.createElement("div")).innerHTML=l,(u.textContent||u.innerText||"").length>n)){try{c=function(e,n){var r=document.createElement("div");return r.innerHTML=e,function e(r,o){var t=r.firstChild;r.innerHTML&&n<=0&&(r.innerHTML="");do{3===t.nodeType?o(t):1===t.nodeType&&t.childNodes&&t.childNodes[0]&&e(t,o)}while(t=t.nextSibling)}(r,(function(e){if(n>0){var r=e.data.length;(n-=r)<=0&&e&&e.data&&(e.data=e.substringData(0,e.data.length+n)+"...")}else e&&e.data&&(e.data="")})),r.innerHTML}(c,n)}catch(e){}p=!0}if(1==r&&(c=(c=(c=c.replace(/(<a((?!PostMention).)*?>)[^<]*<\/a>/g,s("jslirola-login2seeplus.forum.link"))).replace(/<span data-s9e-mediaembed=(.*?)><span (.*?)><iframe(.*?)><\/iframe><\/span><\/span>/g,s("jslirola-login2seeplus.forum.link"))).replace(/<iframe data-s9e-mediaembed=(.*?)><\/iframe>/g,s("jslirola-login2seeplus.forum.link"))),2==r&&(c=c.replace(/<a href=".*?"/g,'<a class="l2sp"')),t){var f=0;c=c.replace(/<img((.(?!class=))*)\/?>/g,(function(e){var n=$(e)[0].src,r=new Image;return r.onload=function(){var e=r.width,n=r.height;e=e>150?e:150,n=n>150?n:150,$(".wlip"+this.counter).width(e),$(".wlip"+this.counter).height(n)},r.counter=f,r.src=n,'<div class="jslirolaLogin2seeplusImgPlaceholder wlip'+f+++'">'+s("jslirola-login2seeplus.forum.image")+"</div>"}))}i&&(c=(c=c.replace(/<pre><code.*?>[^]*<\/pre>/g,s("jslirola-login2seeplus.forum.code"))).replace(/<code.*?>[^>]*<\/code>/g,s("jslirola-login2seeplus.forum.code"))),p&&(c+='<div class="jslirolaLogin2seeplusAlert">'+a.a.translator.trans("jslirola-login2seeplus.forum.post",{login:"<a class='jslirolaLogin2seeplusLogin'>"+a.a.translator.trans("core.forum.header.log_in_link")+"</a>",register:"<a class='jslirolaLogin2seeplusRegister'>"+a.a.translator.trans("core.forum.header.sign_up_link")+"</a>"}).join("")+"</div>"),o[1].children[0]=m.trust(c)}})),Object(o.extend)(l.a.prototype,"oncreate",(function(){$(".Post-body a.l2sp").off("click").on("click",(function(){return a.a.modal.show(p.a)})),$(".jslirolaLogin2seeplusLogin").off("click").on("click",(function(){return a.a.modal.show(p.a)})),$(".jslirolaLogin2seeplusRegister").off("click").on("click",(function(){return a.a.modal.show(d.a)}))}))}))}]);
//# sourceMappingURL=forum.js.map