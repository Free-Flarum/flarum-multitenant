module.exports=function(t){var a={};function e(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)e.d(n,s,function(a){return t[a]}.bind(null,s));return n},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=19)}([,function(t,a){t.exports=flarum.core.compat["common/components/Button"]},,function(t,a){t.exports=flarum.core.compat["common/components/Alert"]},,,,,,,,,,,,function(t,a){t.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(t,a){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,a){t.exports=flarum.core.compat["admin/components/UploadImageButton"]},,function(t,a,e){"use strict";function n(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a}e.r(a);var s=e(15),r=e.n(s),o=e(3),i=e.n(o),p=e(1),l=e.n(p),u=e(16),c=e.n(u);function d(){return(d=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}var v=e(17);var h=function(t){n(e,t);var a;a=e;function e(){return t.apply(this,arguments)||this}e.initAttrs=function(a){t.initAttrs.call(this,a),a.name="pwa-icon-"+a.size+"x"+a.size};var s=e.prototype;return s.view=function(a){return this.attrs.loading=this.loading,this.attrs.className=(this.attrs.className||"")+" Button",app.data.settings["askvortsov-pwa.icon_"+this.attrs.size+"_path"]?(this.attrs.onclick=this.remove.bind(this),m("div",null,m("p",null,m("img",{src:app.forum.attribute(this.attrs.name+"Url"),alt:""})),m("p",null,t.prototype.view.call(this,d({},a,{children:app.translator.trans("core.admin.upload_image.remove_button")}))))):(this.attrs.onclick=this.upload.bind(this),t.prototype.view.call(this,d({},a,{children:app.translator.trans("core.admin.upload_image.upload_button")})))},s.resourceUrl=function(){return app.forum.attribute("apiUrl")+"/pwa/logo/"+this.attrs.size},e}(e.n(v).a);var f=function(t){n(e,t);var a;a=e;function e(){return t.apply(this,arguments)||this}var s=e.prototype;return s.oninit=function(a){t.prototype.oninit.call(this,a),this.saving=!1,this.refresh()},s.refresh=function(){var t=this;this.loading=!0,this.status_messages=[],this.manifest={},this.sizes=[],app.request({method:"GET",url:app.forum.attribute("apiUrl")+"/pwa/settings"}).then((function(a){t.manifest=a.data.attributes.manifest,t.sizes=a.data.attributes.sizes,t.status_messages=a.data.attributes.status_messages,t.loading=!1,m.redraw()}))},s.checkExistence=function(t){var a=new XMLHttpRequest;return a.open("HEAD",t,!1),a.send(),404!=a.status},s.content=function(){var t=this;return this.loading||this.saving?m("div",{className:"PWAPage"},m("div",{className:"container"},m(c.a,null))):m("div",{className:"PWAPage"},m("div",{className:"container"},m("form",null,m("h2",null,app.translator.trans("askvortsov-pwa.admin.pwa.heading")),m("div",{className:"helpText"},app.translator.trans("askvortsov-pwa.admin.pwa.text")),m("div",{class:"statusCheck"},m("legend",null,app.translator.trans("askvortsov-pwa.admin.pwa.status_check_heading")),this.status_messages.map((function(t){return m(i.a,{type:t.type,dismissible:!1},[t.message])}))),m("fieldset",{class:"parent"},m("legend",null,app.translator.trans("askvortsov-pwa.admin.pwa.maintenance.heading")),this.buildSettingComponent({setting:"askvortsov-pwa.debug",label:app.translator.trans("askvortsov-pwa.admin.pwa.maintenance.debug_label"),help:app.translator.trans("askvortsov-pwa.admin.pwa.maintenance.debug_text"),type:"boolean"}),this.buildSettingComponent((function(){return m("div",null,m(l.a,{className:"Button",onclick:t.resetVapid.bind(t)},"Reset VAPID keys"),m("div",{className:"helpText"},app.translator.trans("askvortsov-pwa.admin.pwa.maintenance.reset_vapid_text")))}))),m("fieldset",{class:"parent"},m("fieldset",null,m("legend",null,app.translator.trans("askvortsov-pwa.admin.pwa.about.heading")),this.buildSettingComponent({setting:"askvortsov-pwa.shortName",placeholder:this.setting("forum_title")(),label:app.translator.trans("askvortsov-pwa.admin.pwa.about.short_name_label"),help:app.translator.trans("askvortsov-pwa.admin.pwa.about.short_name_text"),type:"text"})),m("fieldset",null,this.buildSettingComponent({setting:"askvortsov-pwa.longName",placeholder:this.setting("forum_title")(),label:app.translator.trans("askvortsov-pwa.admin.pwa.about.long_name_label"),help:app.translator.trans("askvortsov-pwa.admin.pwa.about.long_name_text"),type:"text"})),m("fieldset",null,m("div",{className:"helpText"},app.translator.trans("askvortsov-pwa.admin.pwa.about.description_text")),m("textarea",{className:"FormControl",value:this.manifest.description,disabled:!0},this.manifest.description))),m("fieldset",{class:"parent"},m("fieldset",null,m("legend",null,app.translator.trans("askvortsov-pwa.admin.pwa.colors.heading")),this.buildSettingComponent({setting:"askvortsov-pwa.themeColor",placeholder:this.setting("theme_primary_color")(),label:app.translator.trans("askvortsov-pwa.admin.pwa.colors.theme_color_label"),help:app.translator.trans("askvortsov-pwa.admin.pwa.colors.theme_color_text"),type:"text"})),m("fieldset",null,this.buildSettingComponent({setting:"askvortsov-pwa.backgroundColor",placeholder:"#aaaaaa",label:app.translator.trans("askvortsov-pwa.admin.pwa.colors.background_color_label"),help:app.translator.trans("askvortsov-pwa.admin.pwa.colors.background_color_text"),type:"text"}))),m("fieldset",{class:"parent"},m("fieldset",null,m("legend",null,app.translator.trans("askvortsov-pwa.admin.pwa.other.heading")),this.buildSettingComponent({setting:"askvortsov-pwa.forcePortrait",label:app.translator.trans("askvortsov-pwa.admin.pwa.other.force_portrait_text"),type:"boolean"}))),this.submitButton(),m("fieldset",null,m("legend",null,app.translator.trans("askvortsov-pwa.admin.pwa.logo_heading")),m("div",{className:"helpText"},app.translator.trans("askvortsov-pwa.admin.pwa.logo_text")),this.sizes.map((function(t){return m("fieldset",{class:"logoFieldset"},m(h,{size:t}),m("div",{className:"helpText"},app.translator.trans("askvortsov-pwa.admin.pwa.logo_size_text",{size:t})))}))))))},s.resetVapid=function(){confirm(app.translator.trans("askvortsov-pwa.admin.pwa.maintenance.reset_vapid_confirm"))&&app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/reset_vapid"}).then((function(t){app.alerts.show({type:"success"},app.translator.trans("askvortsov-pwa.admin.pwa.maintenance.reset_vapid_success",{count:t.deleted}))}))},s.saveSettings=function(a){if(/^#[0-9a-f]{3}([0-9a-f]{3})?$/i.test(this.setting("askvortsov-pwa.backgroundColor")()))return t.prototype.saveSettings.call(this,a);alert(app.translator.trans("core.admin.appearance.enter_hex_message"))},e}(r.a);app.initializers.add("askvortsov/flarum-pwa",(function(){app.extensionData.for("askvortsov-pwa").registerPage(f)}))}]);
//# sourceMappingURL=admin.js.map