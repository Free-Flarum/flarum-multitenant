{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/app']\"","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Link']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/utils/Stream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Tooltip']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/utils/extractText']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/helpers/listItems']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/utils/classList']\"","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/regenerator/index.js","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/states/PostStreamState']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/helpers/fullTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/helpers/icon']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/models/Tag']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/utils/mixin']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['forum/components/ComposerBody']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/TextEditor']\"","webpack://@v17development/flarum-blog/external \"flarum.core\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['common/components/LinkButton']\"","webpack://@v17development/flarum-blog/./node_modules/regenerator-runtime/runtime.js","webpack://@v17development/flarum-blog/external \"flarum.extensions['fof-upload']\"","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@v17development/flarum-blog/./src/forum/utils/selectFiles.ts","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogAuthor.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/ForumNav.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogItemSidebar.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/Language.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/LanguageDropdown.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/components/ArticleSubscription.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/utils/extendTagOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/discussionRouting.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/ComposerPreview.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/Composer.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogComposer.js","webpack://@v17development/flarum-blog/./src/forum/utils/addSidebarNav.js","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/forum/compat.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","require","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","obj","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","Promise","iter","toString","keys","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","extensions","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","selectFiles","contentType","multiple","input","document","createElement","accept","onchange","_","files","Array","from","click","BlogPostSettingsModal","oninit","vnode","attrs","article","meta","blogMeta","app","store","createRecord","isNew","exists","summary","Stream","featuredImage","isFeatured","isSized","isPendingReview","className","title","content","fields","toArray","items","ItemList","add","style","maxWidth","minWidth","width","minHeight","bidi","placeholder","fofUploadButton","forum","attribute","Uploader","components","class","onclick","a","file","uploadingAlertId","alerts","show","uploader","callbacks","success","upload","fileModel","dismiss","url","icon","data-upload-enabled","readonly","src","alt","marginTop","Switch","component","val","fontWeight","Button","loading","submitData","relationships","isComposer","discussion","onsubmit","e","preventDefault","pushData","attributes","hide","save","redraw","response","handleErrors","Modal","RenameArticleModal","redirect","translator","trans","onChange","slug","route","set","window","history","replaceState","BlogPostController","init","loadedPost","manageArticleButtons","LanguageDiscussionModal","canRename","modal","articlePost","firstPost","getById","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","canTag","TagDiscussionModal","Alert","canChangeLanguage","canLock","DiscussionControls","lockAction","isLocked","canHide","isHidden","restoreAction","canDelete","buttons","confirm","extractText","getCurrent","previous","back","hideAction","view","Dropdown","label","buttonClassName","menuClassName","onshow","find","id","Component","BlogAuthor","author","user","backgroundColor","color","href","username","avatar","bio","listItems","BlogCategories","blogCategories","map","tagId","tag","tags","showSubTags","param","all","_tag","isChild","parent","categoryItem","ForumNav","navItems","IndexPage","BlogItemSidebar","itemlist","Language","languages","options","reduce","lang","code","extra","language","uppercase","toUpperCase","LanguageDropdown","selected","defaultSelected","formatter","locale","active","BlogOverview","setTitle","bodyClass","isLoading","featuredPosts","posts","hasMore","isLoadingMore","currentSelectedLanguage","loadBlogOverview","featuredCount","showCategories","showForumNav","preloadBlogOverview","preloadedApiDocument","setTimeout","reloadData","q","filter","sort","articles","payload","links","loadMore","replace","data","defaultImage","newArticle","location","pathname","clear","blogImage","allTags","backgroundImage","isSticky","text","position","humanTime","createdAt","commentCount","currentCategory","getBy","join","Page","ArticleSubscription","currentSubscriptionState","subscription","notifyEmail","session","preferences","notifyTooltip","saveSubscription","indexOf","BlogItem","near","found","loadBlogItem","split","includedPosts","included","articleId","b","stream","PostStreamState","goToNumber","postItems","classList","fullTime","fontSize","marginRight","contentItems","opacity","articleItems","PostStream","onPositionChange","positionChanged","matches","startNumber","endNumber","lastReadPostNumber","BlogMeta","mixin","Model","hasOne","extendTagOverview","extend","TagsPage","markup","knowledgeBaseTags","tag_tiles","children","tile","remove","original_discussion_route","shouldRedirect","blogTags","ComposerPreview","oncreate","s9e","TextFormatter","preview","dom","Composer","previewContent","hasContent","TextEditor","submitLabel","jumpToPreview","ComposerBody","BlogComposer","articleLanguage","tagList","isArray","foundTag","isSaving","openTagsModal","selectedTags","openNameArticleModal","openBlogSettings","pageItems","articleWrapperItems","cursor","originalContent","alert","addSidebarNav","initializers","routes","blog","path","blogCategory","blogComposer","blogArticle","models","Discussion","Tag","isBlog","currentTag","tagRedirectEnabled","override","DiscussionPage","original","discussionRouting","assign"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 49);\n","module.exports = flarum.core.compat['forum/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = require(\"regenerator-runtime\");\n","module.exports = flarum.core.compat['common/helpers/humanTime'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/PostStream'];","module.exports = flarum.core.compat['forum/states/PostStreamState'];","module.exports = flarum.core.compat['forum/components/EditPostComposer'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/components/SelectDropdown'];","module.exports = flarum.core.compat['common/helpers/fullTime'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['tags/models/Tag'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['common/utils/mixin'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['forum/components/ComposerBody'];","module.exports = flarum.core.compat['common/components/TextEditor'];","module.exports = flarum.core;","module.exports = flarum.core.compat['common/components/LinkButton'];","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = flarum.extensions['fof-upload'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Asynchronously select file(s).\n *\n * @param contentType The content type of files you wish to select. For instance, use \"image/*\" to select all types of images.\n * @param multiple Indicates if the user can select multiple files.\n * @returns A promise of a file or array of files in case the multiple parameter is true.\n */\nfunction selectFiles(contentType: string, multiple: false): Promise<File>;\nfunction selectFiles(contentType: string, multiple: true): Promise<File[]>;\n\nfunction selectFiles(\n  contentType: string,\n  multiple: boolean\n): Promise<File | File[]> {\n  return new Promise((resolve) => {\n    let input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.multiple = multiple;\n    input.accept = contentType;\n\n    input.onchange = (_) => {\n      let files = Array.from(input.files || []);\n      if (multiple) resolve(files);\n      else resolve(files[0]);\n    };\n\n    input.click();\n  });\n}\n\nexport default selectFiles;\n","import app from \"flarum/forum/app\";\nimport Modal from \"flarum/common/components/Modal\";\nimport Button from \"flarum/common/components/Button\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport Stream from \"flarum/common/utils/Stream\";\nimport Switch from \"flarum/common/components/Switch\";\nimport selectFiles from \"../../utils/selectFiles\";\n\nexport default class BlogPostSettingsModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    if (this.attrs.article) {\n      this.meta =\n        this.attrs.article && this.attrs.article.blogMeta()\n          ? this.attrs.article.blogMeta()\n          : app.store.createRecord(\"blogMeta\");\n    } else {\n      this.meta = this.attrs.meta\n        ? this.attrs.meta\n        : app.store.createRecord(\"blogMeta\");\n    }\n\n    this.isNew = !this.meta.exists;\n\n    this.summary = Stream(this.meta.summary() || \"\");\n\n    this.featuredImage = Stream(this.meta.featuredImage() || \"\");\n\n    this.isFeatured = Stream(this.meta.isFeatured() || false);\n    this.isSized = Stream(this.meta.isSized() || false);\n    this.isPendingReview = Stream(this.meta.isPendingReview() || false);\n  }\n\n  className() {\n    return \"Modal--small Support-Modal\";\n  }\n\n  title() {\n    return \"Blog post settings\";\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      \"summary\",\n      <div className=\"Form-group\">\n        <label>Article summary:</label>\n        <textarea\n          className=\"FormControl\"\n          style={{\n            maxWidth: \"100%\",\n            minWidth: \"100%\",\n            width: \"100%\",\n            minHeight: \"120px\",\n          }}\n          bidi={this.summary}\n          placeholder={\"Please enter a summary\"}\n        />\n\n        <small>\n          This summary will be visible on the blog overview page and will be\n          used for SEO purposes.\n        </small>\n      </div>,\n      30\n    );\n\n    let fofUploadButton = null;\n\n    if (\n      \"fof-upload\" in flarum.extensions &&\n      app.forum.attribute(\"fof-upload.canUpload\")\n    ) {\n      const {\n        components: { Uploader },\n      } = require(\"@fof-upload\");\n\n      fofUploadButton = (\n        <Button\n          class=\"Button Button--icon\"\n          onclick={async () => {\n            const file = await selectFiles(\"image/*\", false);\n\n            if (!file) return;\n\n            const uploadingAlertId = app.alerts.show(\n              { type: \"info\" },\n              \"Uploading image...\"\n            );\n\n            const fileModel = await new Promise((resolve) => {\n              /**\n               * @param {{file: File}}\n               */\n              function fileUploadSuccessCallback({ file }) {\n                resolve(file);\n              }\n\n              const uploader = new Uploader();\n              uploader.callbacks.success = [fileUploadSuccessCallback];\n\n              uploader.upload([file]).catch(() => {});\n            });\n\n            app.alerts.dismiss(uploadingAlertId);\n\n            this.featuredImage(fileModel.url());\n          }}\n          icon=\"fas fa-cloud-upload-alt\"\n        />\n      );\n    }\n\n    items.add(\n      \"image\",\n      <div className=\"Form-group V17Blog-ArticleImage\">\n        <label>Article image URL:</label>\n        <div data-upload-enabled={!!fofUploadButton}>\n          <input\n            readonly={!!fofUploadButton}\n            type=\"text\"\n            className=\"FormControl\"\n            bidi={this.featuredImage}\n            placeholder=\"https://\"\n          />\n          {fofUploadButton}\n        </div>\n\n        <small>Best image resolution for social media: 1200x630</small>\n\n        {this.featuredImage() !== \"\" && (\n          <img\n            src={this.featuredImage()}\n            alt=\"Article image\"\n            title=\"Blog post image\"\n            style={{ width: \"100%\", marginTop: \"15px\" }}\n          />\n        )}\n      </div>,\n      30\n    );\n\n    items.add(\n      \"sized\",\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.isSized() == true,\n            onchange: (val) => {\n              this.isSized(val);\n            },\n          },\n          [\n            <b>Highlighted post</b>,\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>\n              Give this post a big image on the blog overview page.\n            </div>,\n          ]\n        )}\n      </div>,\n      -10\n    );\n\n    items.add(\n      \"submit\",\n      <div className=\"Form-group\">\n        {Button.component(\n          {\n            type: \"submit\",\n            className: \"Button Button--primary SupportModal-save\",\n            loading: this.loading,\n          },\n          \"Update\"\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      summary: this.summary(),\n      featuredImage: this.featuredImage(),\n      isFeatured: this.isFeatured(),\n      isSized: this.isSized(),\n      isPendingReview: this.isPendingReview(),\n      relationships:\n        this.isNew && !this.attrs.isComposer\n          ? {\n              discussion: this.attrs.article,\n            }\n          : null,\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    // Submit data\n    if (this.attrs.onsubmit) {\n      // Update attributes\n      this.meta.pushData({\n        attributes: this.submitData(),\n      });\n\n      // Push\n      this.attrs.onsubmit(this.meta);\n\n      this.hide();\n      return;\n    }\n\n    this.loading = true;\n\n    this.meta.save(this.submitData()).then(\n      () => {\n        if (this.attrs.article) {\n          this.attrs.article.pushData({\n            relationships: {\n              blogMeta: this.meta,\n            },\n          });\n        }\n\n        this.hide();\n        m.redraw();\n      },\n      (response) => {\n        this.loading = false;\n        this.handleErrors(response);\n      }\n    );\n  }\n}\n","import Modal from \"flarum/common/components/Modal\";\nimport Button from \"flarum/common/components/Button\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport Stream from \"flarum/common/utils/Stream\";\n\nexport default class RenameArticleModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.article = this.attrs.article;\n\n    this.name = Stream(this.article.title() || \"\");\n\n    this.redirect = this.attrs.redirect;\n  }\n\n  className() {\n    return \"Modal--small Support-Modal\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"v17development-flarum-blog.forum.tools.rename_article\"\n    );\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      \"name\",\n      <div className=\"Form-group\">\n        <label>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.article.title\"\n          )}\n          :\n        </label>\n        <input\n          className=\"FormControl\"\n          placeholder={app.translator.trans(\n            \"v17development-flarum-blog.forum.article.title\"\n          )}\n          bidi={this.name}\n        />\n      </div>,\n      50\n    );\n\n    items.add(\n      \"submit\",\n      <div className=\"Form-group\">\n        {Button.component(\n          {\n            type: \"submit\",\n            className: \"Button Button--primary SupportModal-save\",\n            loading: this.loading,\n          },\n          \"Update\"\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      title: this.name(),\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    // Do not save\n    if (this.attrs.onChange) {\n      this.attrs.onChange(this.name());\n      this.hide();\n\n      return;\n    }\n\n    this.article\n      .save({\n        title: this.name(),\n      })\n      .then(\n        () => {\n          this.hide();\n\n          // Redirect\n          if (this.redirect) {\n            const url = `/blog/${this.article.slug()}`;\n\n            m.route.set(url, true);\n            window.history.replaceState(null, document.title, url);\n          }\n        },\n        (response) => {\n          this.loading = false;\n          this.handleErrors(response);\n        }\n      );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\nimport Alert from \"flarum/common/components/Alert\";\nimport Button from \"flarum/common/components/Button\";\nimport Dropdown from \"flarum/common/components/Dropdown\";\nimport BlogPostSettingsModal from \"./Modals/BlogPostSettingsModal\";\nimport EditPostComposer from \"flarum/forum/components/EditPostComposer\";\nimport extractText from \"flarum/common/utils/extractText\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport RenameArticleModal from \"./Modals/RenameArticleModal\";\n\nexport default class BlogPostController extends Component {\n  init() {\n    this.loadedPost = false;\n  }\n\n  manageArticleButtons() {\n    const article = this.attrs.article;\n    const items = new ItemList();\n\n    // Working for GlowingBlue version\n    const LanguageDiscussionModal =\n      flarum.extensions[\"fof-discussion-language\"] &&\n      typeof flarum.extensions[\"fof-discussion-language\"].components !==\n        \"undefined\"\n        ? flarum.extensions[\"fof-discussion-language\"].components\n            .LanguageDiscussionModal\n        : null;\n\n    // Rename article\n    if (article.canRename()) {\n      items.add(\n        \"rename\",\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: () => app.modal.show(RenameArticleModal, { article }),\n            icon: \"fas fa-pencil-alt\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.tools.rename_article\"\n          )\n        ),\n        100\n      );\n    }\n\n    const articlePost = article.firstPost()\n      ? article.firstPost()\n      : app.store.getById(\"posts\", article.firstPostId());\n\n    // Edit article\n    items.add(\n      \"edit\",\n      Button.component(\n        {\n          className: \"Button\",\n          disabled: !articlePost || !articlePost.canEdit(),\n          onclick: () => {\n            app.composer.load(EditPostComposer, { post: articlePost });\n            app.composer.show();\n          },\n          icon: \"fas fa-edit\",\n        },\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.tools.edit_article\"\n        )\n      ),\n      90\n    );\n\n    // Article settings\n    items.add(\n      \"articleSettings\",\n      Button.component(\n        {\n          className: \"Button\",\n          onclick: () => app.modal.show(BlogPostSettingsModal, { article }),\n          icon: \"fas fa-cogs\",\n        },\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.tools.article_settings\"\n        )\n      ),\n      80\n    );\n\n    // Update categories\n    if (article.canTag()) {\n      items.add(\n        \"tag\",\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: () =>\n              app.modal.show(TagDiscussionModal, { discussion: article }),\n            icon: \"fas fa-tag\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.tools.update_category\"\n          )\n        ),\n        70\n      );\n    }\n\n    // Approve article\n    if (article.blogMeta() && article.blogMeta().isPendingReview()) {\n      items.add(\"separator1\", <li className=\"Dropdown-separator\" />, 65);\n\n      items.add(\n        \"approve\",\n        Button.component(\n          {\n            className: \"Button\",\n            disabled: !app.forum.attribute(\"canApproveBlogPosts\"),\n            onclick: () => {\n              article\n                .blogMeta()\n                .save({\n                  isPendingReview: false,\n                })\n                .then(\n                  () => {\n                    app.alerts.show(\n                      Alert,\n                      { type: \"success\" },\n                      app.translator.trans(\n                        \"v17development-flarum-blog.forum.review_article.approve_article_approved\"\n                      )\n                    );\n                  },\n                  (response) => {\n                    this.loading = false;\n                    this.handleErrors(response);\n                  }\n                );\n            },\n            icon: \"fas fa-thumbs-up\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.review_article.approve_article\"\n          )\n        ),\n        60\n      );\n    }\n\n    // Language\n    if (\n      article.canChangeLanguage &&\n      article.canChangeLanguage() &&\n      LanguageDiscussionModal\n    ) {\n      items.add(\n        \"lang\",\n        Button.component(\n          {\n            icon: \"fas fa-globe\",\n            onclick: () =>\n              app.modal.show(LanguageDiscussionModal, { discussion: article }),\n          },\n          app.translator.trans(\n            \"fof-discussion-language.forum.discussion_controls.change_language_button\"\n          )\n        ),\n        50\n      );\n    }\n\n    items.add(\"separator2\", <li className=\"Dropdown-separator\" />, 40);\n\n    // Lock article\n    if (article.canLock()) {\n      items.add(\n        \"lock\",\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: DiscussionControls.lockAction.bind(article),\n            icon: `fas ${\n              article.isLocked() ? \"fa-comments\" : \"fa-comment-slash\"\n            }`,\n          },\n          article.isLocked()\n            ? app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.enable_comments\"\n              )\n            : app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.disable_comments\"\n              )\n        ),\n        30\n      );\n    }\n\n    // Hide/show/delete\n    if (article.canHide()) {\n      // Article is hidden\n      if (article.isHidden()) {\n        // Recover article\n        items.add(\n          \"recover\",\n          Button.component(\n            {\n              className: \"Button\",\n              onclick: DiscussionControls.restoreAction.bind(article),\n              icon: \"fas fa-eye\",\n            },\n            app.translator.trans(\n              \"v17development-flarum-blog.forum.tools.recover_article\"\n            )\n          ),\n          20\n        );\n\n        // Delete article\n        if (article.canDelete()) {\n          buttons.add(\n            \"delete\",\n            Button.component(\n              {\n                className: \"Button\",\n                onclick: () => {\n                  // Confirm deletion\n                  if (\n                    confirm(\n                      extractText(\n                        app.translator.trans(\n                          \"core.forum.discussion_controls.delete_confirmation\"\n                        )\n                      )\n                    )\n                  ) {\n                    // Redirect if the current page is an blog article\n                    if (app.history.getCurrent().name === \"blogArticle\") {\n                      if (app.previous) {\n                        app.history.back();\n                      } else {\n                        m.route.set(app.route(\"blog\"));\n                      }\n                    }\n\n                    return article.delete().then(() => {\n                      m.redraw();\n                    });\n                  }\n                },\n                icon: \"far fa-trash-alt\",\n              },\n              app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.delete_forever\"\n              )\n            ),\n            10\n          );\n        }\n      } else {\n        // Hide article\n        items.add(\n          \"hide\",\n          Button.component(\n            {\n              className: \"Button\",\n              onclick: DiscussionControls.hideAction.bind(article),\n              icon: \"fas fa-eye-slash\",\n            },\n            app.translator.trans(\n              \"v17development-flarum-blog.forum.tools.hide_article\"\n            )\n          ),\n          0\n        );\n      }\n    }\n\n    return items;\n  }\n\n  view() {\n    const article = this.attrs.article;\n\n    const articlePost = article.firstPost()\n      ? article.firstPost()\n      : app.store.getById(\"posts\", article.firstPostId());\n\n    return (\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\n          {Dropdown.component(\n            {\n              icon: \"fas fa-cog\",\n              label: \"Manage\",\n              buttonClassName: \"Button\",\n              menuClassName: \"Dropdown-menu--right\",\n              onshow: () => {\n                // Get post data to make sure they can edit the post\n                if (articlePost && !articlePost.canEdit() && !this.loadedPost) {\n                  this.loadedPost = true;\n                  app.store\n                    .find(\n                      \"posts\",\n                      article.firstPost()\n                        ? article.firstPost().id()\n                        : article.firstPostId()\n                    )\n                    .then(() => {})\n                    .catch(() => {})\n                    .then(() => m.redraw());\n                }\n              },\n            },\n            this.manageArticleButtons().toArray()\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport listItems from \"flarum/common/helpers/listItems\";\nimport avatar from \"flarum/common/helpers/avatar\";\nimport Link from \"flarum/common/components/Link\";\n\nexport default class BlogAuthor extends Component {\n  view() {\n    const author = !this.attrs.loading\n      ? this.attrs.article\n        ? this.attrs.article.user()\n        : this.attrs.user\n      : null;\n\n    return (\n      <div className={\"FlarumBlog-Article-Author\"}>\n        <div\n          className={`FlarumBlog-Article-Author-background ${\n            this.attrs.loading ? \"FlarumBlog-Author-Ghost\" : \"\"\n          }`}\n          style={{\n            backgroundColor: author && author.color() ? author.color() : null,\n          }}\n        />\n\n        <div className={\"FlarumBlog-Article-Author-Avatar\"}>\n          {author ? (\n            <Link href={app.route(\"user\", { username: author.username() })}>\n              {avatar(author)}\n            </Link>\n          ) : (\n            <span className={\"Avatar FlarumBlog-Author-Ghost\"} />\n          )}\n        </div>\n\n        {author && (\n          <div className={\"FlarumBlog-Article-Author-Info\"}>\n            <Link\n              href={app.route(\"user\", { username: author.username() })}\n              className={\"FlarumBlog-Article-Author-Name\"}\n            >\n              {author.displayName()}\n            </Link>\n            <p className={\"FlarumBlog-Article-Author-Bio\"}>\n              {author.bio && author.bio()}\n            </p>\n\n            <ul className={\"FlarumBlog-Article-Author-Extended\"}>\n              {listItems(this.items().toArray())}\n            </ul>\n          </div>\n        )}\n\n        {this.attrs.loading && (\n          <div>\n            <span\n              className={\n                \"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </span>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  items() {\n    return new ItemList();\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Link from \"flarum/common/components/Link\";\n\nexport default class BlogCategories extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.blogCategories = app.forum.attribute(\"blogTags\");\n  }\n\n  view() {\n    return (\n      <div className=\"BlogCategories BlogSideWidget\">\n        <h3>\n          {app.translator.trans(\"v17development-flarum-blog.forum.categories\")}\n        </h3>\n\n        {this.blogCategories &&\n          this.blogCategories.map((tagId) => {\n            const tag = app.store.getById(\"tags\", tagId);\n\n            if (!tag) return null;\n\n            const tags = [];\n            let showSubTags =\n              this.blogCategories.length === 1 ||\n              tag.slug() === m.route.param(\"slug\");\n\n            // Add tags\n            app.store.all(\"tags\").forEach((_tag) => {\n              if (_tag.isChild() && _tag.parent() === tag) {\n                if (_tag.slug() === m.route.param(\"slug\")) {\n                  showSubTags = true;\n                }\n\n                tags.push(this.categoryItem(_tag));\n              }\n            });\n\n            return showSubTags\n              ? [this.categoryItem(tag), ...tags]\n              : this.categoryItem(tag);\n          })}\n      </div>\n    );\n  }\n\n  // Category item\n  categoryItem(tag) {\n    return (\n      <Link\n        href={app.route(\"blogCategory\", { slug: tag.slug() })}\n        className={`BlogSideWidget-item BlogSideWidget-item-${tag.id()} ${\n          tag.isChild() && app.forum.attribute(\"blogCategoryHierarchy\") == true\n            ? \"BlogSideWidget-item-child\"\n            : \"\"\n        }`}\n      >\n        <span\n          className={tag.icon() === \"\" ? \"BlogSideWidget-item-colored\" : \"\"}\n          style={{ backgroundColor: tag.icon() === \"\" ? tag.color() : null }}\n        >\n          <i className={tag.icon()} />\n        </span>\n        {tag.name()}\n      </Link>\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport SelectDropdown from \"flarum/common/components/SelectDropdown\";\n\nexport default class ForumNav extends Component {\n  view() {\n    return (\n      <div className=\"BlogForumNav BlogSideWidget\">\n        <h3>\n          {app.translator.trans(\"v17development-flarum-blog.forum.forum_nav\")}\n        </h3>\n        <nav className=\"IndexPage-nav sideNav\">\n          <SelectDropdown buttonClassName=\"Button\" className=\"App-titleControl\">\n            {this.navItems().toArray()}\n          </SelectDropdown>\n        </nav>\n      </div>\n    );\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport listItems from \"flarum/common/helpers/listItems\";\nimport BlogAuthor from \"./BlogAuthor\";\nimport BlogCategories from \"../BlogCategories\";\nimport ForumNav from \"../ForumNav\";\n\nexport default class BlogItemSidebar extends Component {\n  view() {\n    return (\n      <div className={\"FlarumBlog-Article-Sidebar\"}>\n        <ul>{listItems(this.items().toArray())}</ul>\n      </div>\n    );\n  }\n\n  items() {\n    const itemlist = new ItemList();\n\n    itemlist.add(\"author\", BlogAuthor.component(this.attrs), 0);\n\n    itemlist.add(\"categories\", BlogCategories.component(this.attrs), 0);\n\n    itemlist.add(\"nav\", ForumNav.component(this.attrs), 0);\n\n    return itemlist;\n  }\n}\n","import Component from \"flarum/common/Component\";\n\nexport default class Language extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.languages = app.store.all(\"discussion-languages\");\n    this.options = this.languages.reduce((o, lang) => {\n      o[lang.code()] = (\n        <span>\n          <i className={\"fas fa-globe\"} /> {lang.name()}\n        </span>\n      );\n\n      return o;\n    }, this.attrs.extra || {});\n  }\n\n  view() {\n    const { language, uppercase } = this.attrs;\n    const name = language.name() || \"\";\n\n    return (\n      <span>\n        <i className={\"fas fa-globe\"} />\n        &nbsp;\n        {uppercase ? name.toUpperCase() : name}\n      </span>\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Dropdown from \"flarum/common/components/Dropdown\";\nimport Button from \"flarum/common/components/Button\";\nimport Language from \"./Language\";\n\nexport default class LanguageDropdown extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.languages = app.store.all(\"discussion-languages\");\n    this.options = this.languages.reduce((o, lang) => {\n      o[lang.code()] = <Language language={lang} />;\n\n      return o;\n    }, this.attrs.extra || {});\n  }\n\n  view() {\n    const selected = this.attrs.selected;\n\n    return Dropdown.component(\n      {\n        buttonClassName: \"Button\",\n        label: this.options[selected] || this.options[this.attrs.default],\n      },\n      Object.keys(this.options).map((key) => {\n        let defaultSelected;\n        if (\n          app.forum.attribute(\"fof-discussion-language.composerLocaleDefault\")\n        ) {\n          defaultSelected = \"any\";\n        } else {\n          defaultSelected = app.translator.formatter.locale;\n        }\n        const isSelected = selected || defaultSelected;\n        const active = key === isSelected;\n\n        return Button.component(\n          {\n            active,\n            icon: active ? \"fas fa-check\" : true,\n            onclick: () => this.attrs.onclick(key),\n          },\n          this.options[key]\n        );\n      })\n    );\n  }\n}\n","import app from \"flarum/forum/app\";\n\nimport Page from \"flarum/common/components/Page\";\nimport Button from \"flarum/common/components/Button\";\nimport humanTime from \"flarum/common/helpers/humanTime\";\nimport BlogCategories from \"../components/BlogCategories\";\nimport Link from \"flarum/common/components/Link\";\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\nimport ForumNav from \"../components/ForumNav\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\n\nexport default class BlogOverview extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    this.bodyClass = \"BlogOverviewPage\";\n\n    this.isLoading = true;\n    this.featuredPosts = [];\n    this.posts = [];\n    this.hasMore = null;\n    this.isLoadingMore = false;\n\n    this.languages = app.store.all(\"discussion-languages\");\n\n    this.currentSelectedLanguage = m.route.param(\"lang\")\n      ? m.route.param(\"lang\")\n      : app.translator.formatter.locale;\n\n    // Send history push\n    app.history.push(\"blog\");\n\n    this.loadBlogOverview();\n\n    this.featuredCount = app.forum.attribute(\"blogFeaturedCount\");\n\n    this.showCategories = true;\n    this.showForumNav = true;\n  }\n\n  // Load blog overview\n  loadBlogOverview() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      this.reloadData();\n    }\n\n    m.redraw();\n  }\n\n  reloadData() {\n    let q = `is:blog${\n      m.route.param(\"slug\") ? ` tag:${m.route.param(\"slug\")}` : \"\"\n    }`;\n\n    if (this.languages !== null && this.languages.length >= 1) {\n      q += ` language:${this.currentSelectedLanguage}`;\n    }\n\n    app.store\n      .find(\"discussions\", {\n        filter: {\n          q,\n        },\n        sort: \"-createdAt\",\n      })\n      .then(this.show.bind(this))\n      .catch(() => {\n        m.redraw();\n      });\n  }\n\n  // Show blog posts\n  show(articles) {\n    if (articles.length === 0) {\n      this.isLoading = false;\n      m.redraw();\n\n      return;\n    }\n\n    // Set pagination\n    this.hasMore =\n      articles.payload.links && articles.payload.links.next\n        ? articles.payload.links.next\n        : null;\n\n    this.featuredPosts = articles.slice(0, this.featuredCount);\n    this.posts =\n      articles.length > this.featuredCount\n        ? articles.slice(this.featuredCount, articles.length)\n        : [];\n\n    this.isLoading = false;\n\n    m.redraw();\n  }\n\n  // Load more blog posts\n  loadMore() {\n    this.isLoadingMore = true;\n\n    app.store\n      .find(this.hasMore.replace(app.forum.attribute(\"apiUrl\"), \"\"))\n      .then((data) => {\n        data.map((article) => this.posts.push(article));\n\n        // Update hasmore button\n        this.hasMore =\n          data.payload.links && data.payload.links.next\n            ? data.payload.links.next\n            : null;\n      })\n      .catch(() => {})\n      .then(() => {\n        this.isLoadingMore = false;\n        m.redraw();\n      });\n  }\n\n  title() {\n    if (!m.route.param(\"slug\")) {\n      return (\n        <h2>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.recent_posts\"\n          )}\n        </h2>\n      );\n    }\n\n    const tag = app.store\n      .all(\"tags\")\n      .filter((tag) => tag.slug() === m.route.param(\"slug\"));\n\n    return (\n      <h2>\n        {tag && tag[0] && tag[0].name()}\n        <small>\n          {\" \"}\n          -{\" \"}\n          <Link href={app.route(\"blog\")}>\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.return_to_overview\"\n            )}\n          </Link>\n        </small>\n      </h2>\n    );\n  }\n\n  view() {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n\n    return (\n      <div className={\"FlarumBlogOverview\"}>\n        <div className={\"container\"}>\n          <div className={\"BlogFeatured\"}>\n            <div className={\"BlogOverviewButtons\"}>\n              {app.forum.attribute(\"canWriteBlogPosts\") && (\n                <Button\n                  className={\"Button\"}\n                  onclick={() => this.newArticle()}\n                  icon={\"fas fa-pencil-alt\"}\n                >\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.compose.write_article\"\n                  )}\n                </Button>\n              )}\n\n              {this.languages !== null && this.languages.length >= 1 && (\n                <LanguageDropdown\n                  selected={this.currentSelectedLanguage}\n                  onclick={(language) => {\n                    this.currentSelectedLanguage = language;\n\n                    m.route.set(document.location.pathname, {\n                      lang: language,\n                    });\n\n                    this.reloadData();\n                  }}\n                />\n              )}\n            </div>\n\n            {this.title()}\n\n            <div style={{ clear: \"both\" }} />\n\n            <div className={\"BlogFeatured-list\"}>\n              {/* Ghost data */}\n              {this.isLoading &&\n                [0, 1, 2].map(() => (\n                  <div\n                    className={\n                      \"BlogFeatured-list-item BlogFeatured-list-item-ghost\"\n                    }\n                  >\n                    <div className={\"BlogFeatured-list-item-details\"}>\n                      <h4>&nbsp;</h4>\n\n                      <div className={\"data\"}>\n                        <span>\n                          <i className={\"far fa-wave\"} />\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n\n              {!this.isLoading &&\n                this.featuredPosts.length >= 0 &&\n                this.featuredPosts.map((article) => {\n                  const blogImage =\n                    article.blogMeta() && article.blogMeta().featuredImage()\n                      ? `url(${article.blogMeta().featuredImage()})`\n                      : defaultImage;\n                  const allTags = article.tags();\n\n                  return (\n                    <Link\n                      href={app.route(\"blogArticle\", {\n                        id: `${article.slug()}`,\n                      })}\n                      className={\n                        \"BlogFeatured-list-item FlarumBlog-default-image\"\n                      }\n                      style={{ backgroundImage: blogImage }}\n                    >\n                      <div className={\"BlogFeatured-list-item-top\"}>\n                        {/* {blogTag[0] && <span>{blogTag[0].name()}</span>} */}\n                        {allTags &&\n                          allTags.map((tag) => <span>{tag.name()}</span>)}\n                        {article.isSticky() && (\n                          <span>\n                            <i className={\"fas fa-thumbtack\"} />\n                          </span>\n                        )}\n                        {((article.blogMeta() &&\n                          article.blogMeta().isPendingReview() == true) ||\n                          article.isHidden()) && (\n                          <span>\n                            <i className={\"fas fa-eye-slash\"} />\n                          </span>\n                        )}\n                        {article.blogMeta() &&\n                          article.blogMeta().isPendingReview() == true && (\n                            <Tooltip\n                              text={app.translator.trans(\n                                \"v17development-flarum-blog.forum.review_article.pending_review\"\n                              )}\n                              position=\"bottom\"\n                            >\n                              <span>\n                                <i className={\"far fa-clock\"} />{\" \"}\n                                {app.translator.trans(\n                                  \"v17development-flarum-blog.forum.review_article.pending_review_title\"\n                                )}\n                              </span>\n                            </Tooltip>\n                          )}\n                      </div>\n\n                      <div className={\"BlogFeatured-list-item-details\"}>\n                        <h4>{article.title()}</h4>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-clock\"} />{\" \"}\n                            {humanTime(article.createdAt())}\n                          </span>\n                          <span>\n                            <i className={\"far fa-user\"} />{\" \"}\n                            {article.user()\n                              ? article.user().displayName()\n                              : \"[Deleted]\"}\n                          </span>\n                          <span>\n                            <i className={\"far fa-comment\"} />{\" \"}\n                            {article.commentCount() - 1}\n                          </span>\n                        </div>\n                      </div>\n                    </Link>\n                  );\n                })}\n            </div>\n          </div>\n\n          <div className={\"BlogScrubber\"}>\n            <div className={\"BlogList\"}>\n              {this.isLoading &&\n                [false, false, true, false].map((state) => {\n                  return (\n                    <div\n                      className={`BlogList-item BlogList-item-${\n                        state === true ? \"sized\" : \"default\"\n                      } BlogList-item-ghost`}\n                    >\n                      <div\n                        className={\n                          \"BlogList-item-photo FlarumBlog-default-image\"\n                        }\n                      ></div>\n                      <div className={\"BlogList-item-content\"}>\n                        <h4>&nbsp;</h4>\n                        <p>&nbsp;</p>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-wave\"} />\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n              {!this.isLoading &&\n                this.posts.length >= 1 &&\n                this.posts.map((article) => {\n                  const blogImage =\n                    article.blogMeta() && article.blogMeta().featuredImage()\n                      ? `url(${article.blogMeta().featuredImage()})`\n                      : defaultImage;\n                  const isSized =\n                    article.blogMeta() && article.blogMeta().isSized();\n                  const summary =\n                    article.blogMeta() && article.blogMeta().summary()\n                      ? article.blogMeta().summary()\n                      : \"\";\n\n                  return (\n                    <Link\n                      href={app.route(\"blogArticle\", {\n                        id: `${article.slug()}`,\n                      })}\n                      className={`BlogList-item BlogList-item-${\n                        isSized ? \"sized\" : \"default\"\n                      }`}\n                    >\n                      <div\n                        className={\n                          \"BlogList-item-photo FlarumBlog-default-image\"\n                        }\n                        style={{ backgroundImage: blogImage }}\n                      ></div>\n                      <div className={\"BlogList-item-content\"}>\n                        <h4>\n                          {article.title()}\n                          {((article.blogMeta() &&\n                            article.blogMeta().isPendingReview() == true) ||\n                            article.isHidden()) && (\n                            <i className={\"fas fa-eye-slash\"} />\n                          )}\n                          {article.blogMeta() &&\n                            article.blogMeta().isPendingReview() == true && (\n                              <Tooltip\n                                text={app.translator.trans(\n                                  \"v17development-flarum-blog.forum.review_article.pending_review\"\n                                )}\n                              >\n                                <i className={\"far fa-clock\"} />\n                              </Tooltip>\n                            )}\n                        </h4>\n                        <p>{summary}</p>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-clock\"} />{\" \"}\n                            {humanTime(article.createdAt())}\n                          </span>\n                          <span>\n                            <i className={\"far fa-user\"} />{\" \"}\n                            {article.user()\n                              ? article.user().displayName()\n                              : \"[Deleted]\"}\n                          </span>\n                          <span>\n                            <i className={\"far fa-comment\"} />{\" \"}\n                            {article.commentCount() - 1}\n                          </span>\n                        </div>\n                      </div>\n                    </Link>\n                  );\n                })}\n\n              {!this.isLoading &&\n                this.featuredPosts.length > 0 &&\n                this.hasMore === null && (\n                  <p className={\"FlarumBlog-reached-end\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-blog.forum.no_more_posts\"\n                    )}\n                  </p>\n                )}\n\n              {!this.isLoading &&\n                this.featuredPosts.length === 0 &&\n                this.posts.length === 0 && (\n                  <p className={\"FlarumBlog-reached-end\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-blog.forum.category_empty\"\n                    )}\n                  </p>\n                )}\n\n              {!this.isLoading && this.hasMore !== null && (\n                <div className={\"FlarumBlog-reached-load-more\"}>\n                  <Button\n                    className={\"Button\"}\n                    onclick={() => this.loadMore()}\n                    icon={\"fas fa-chevron-down\"}\n                    loading={this.isLoadingMore}\n                  >\n                    {app.translator.trans(\n                      \"core.forum.discussion_list.load_more_button\"\n                    )}\n                  </Button>\n                </div>\n              )}\n            </div>\n\n            <div className={\"Sidebar\"}>\n              {this.showCategories && <BlogCategories />}\n              {this.showForumNav && <ForumNav />}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  newArticle() {\n    let tags = [];\n\n    // Get current category\n    const currentCategory = app.store.getBy(\n      \"tags\",\n      \"slug\",\n      m.route.param(\"slug\")\n    );\n\n    if (currentCategory) {\n      tags.push(currentCategory);\n    }\n\n    // Redirect to the composer\n    m.route.set(\n      app.route(\"blogComposer\", {\n        tags: tags.map((tag) => tag.id()).join(),\n        lang:\n          this.languages.length > 0 ? this.currentSelectedLanguage : undefined,\n      })\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Button from \"flarum/common/components/Button\";\nimport extractText from \"flarum/common/utils/extractText\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\n\nexport default class ArticleSubscription extends Component {\n  view() {\n    const currentSubscriptionState = this.attrs.discussion.subscription();\n\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences[\"notify_newPost_email\"];\n    const notifyTooltip = extractText(\n      app.translator.trans(\n        notifyEmail\n          ? \"flarum-subscriptions.forum.sub_controls.notify_email_tooltip\"\n          : \"flarum-subscriptions.forum.sub_controls.notify_alert_tooltip\"\n      )\n    );\n\n    let title = app.translator.trans(\n      \"flarum-subscriptions.forum.sub_controls.not_following_button\"\n    );\n    let icon = \"far fa-star\";\n\n    // Following\n    if (currentSubscriptionState === \"follow\") {\n      title = app.translator.trans(\n        \"flarum-subscriptions.forum.sub_controls.following_button\"\n      );\n      icon = \"fas fa-star\";\n    }\n\n    return (\n      <Tooltip text={notifyTooltip} position=\"bottom\">\n        <Button\n          className={`Button BlogArticleSubscription SubscriptionMenu-button--${currentSubscriptionState}`}\n          icon={icon}\n          onclick={this.saveSubscription.bind(\n            this,\n            this.attrs.discussion,\n            [\"follow\", \"ignore\"].indexOf(currentSubscriptionState) !== -1\n              ? null\n              : \"follow\"\n          )}\n        >\n          {title}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  saveSubscription(discussion, subscription) {\n    discussion.save({ subscription });\n  }\n}\n","import Page from \"flarum/common/components/Page\";\nimport CommentPost from \"flarum/forum/components/CommentPost\";\nimport PostStream from \"flarum/forum/components/PostStream\";\nimport PostStreamState from \"flarum/forum/states/PostStreamState\";\nimport BlogPostController from \"../components/BlogPostController\";\nimport BlogItemSidebar from \"../components/BlogItemSidebar/BlogItemSidebar\";\nimport Link from \"flarum/common/components/Link\";\nimport BlogOverview from \"./BlogOverview\";\nimport fullTime from \"flarum/common/helpers/fullTime\";\nimport ArticleSubscription from \"../components/ArticleSubscription\";\nimport classList from \"flarum/common/utils/classList\";\nimport ItemList from \"flarum/common/utils/ItemList\";\nimport icon from \"flarum/common/helpers/icon\";\nimport app from \"flarum/forum/app\";\n\nexport default class BlogItem extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    // Send history push\n    app.history.push(\"blogArticle\");\n\n    this.bodyClass = \"BlogItemPage\";\n\n    this.near = m.route.param(\"near\") || 0;\n\n    this.loading = true;\n    this.found = false;\n    this.article = null;\n\n    this.loadBlogItem();\n  }\n\n  // Load blog overview\n  loadBlogItem() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      app.store\n        .find(\"discussions\", m.route.param(\"id\").split(\"-\")[0])\n        .then(this.show.bind(this))\n        .catch(() => {\n          m.redraw();\n        });\n    }\n\n    m.redraw();\n  }\n\n  // Show blog post\n  show(article) {\n    // Set article data\n    this.article = article;\n\n    // Update title\n    app.setTitle(\n      `${article.title()} - ${app.translator.trans(\n        \"v17development-flarum-blog.forum.blog\"\n      )}`\n    );\n\n    this.loading = false;\n\n    let includedPosts = [];\n    if (article.payload && article.payload.included) {\n      const articleId = article.id();\n\n      includedPosts = article.payload.included\n        .filter(\n          (record) =>\n            record.type === \"posts\" &&\n            record.relationships &&\n            record.relationships.discussion &&\n            record.relationships.discussion.data.id === articleId\n        )\n        .map((record) => app.store.getById(\"posts\", record.id))\n        .sort((a, b) => a.id() - b.id())\n        .slice(0, 20);\n    }\n\n    this.stream = new PostStreamState(article, includedPosts);\n\n    // Scroll to specific post\n    if (this.near) {\n      this.stream.goToNumber(this.near, true);\n    }\n\n    m.redraw();\n  }\n\n  postItems() {\n    let articlePost = null;\n\n    if (!this.loading && this.article) {\n      articlePost = this.article?.firstPost?.()\n        ? this.article.firstPost()\n        : app.store.getById(\"posts\", this.article.firstPostId());\n    }\n\n    const items = new ItemList();\n\n    items.add(\n      \"title\",\n      <h3\n        className={classList(\"FlarumBlog-Article-Title\", {\n          \"FlarumBlog-Article-GhostTitle\": this.loading,\n        })}\n      >\n        {this?.article?.title?.() || \"Ghost title\"}\n        {this.article?.isHidden?.() &&\n          `(${app.translator.trans(\n            \"v17development-flarum-blog.forum.hidden\"\n          )})`}\n      </h3>,\n      100\n    );\n\n    items.add(\n      \"publishDate\",\n      <div\n        className={classList(\"FlarumBlog-Article-PublishDate\", {\n          \"FlarumBlog-Article-GhostPublishDate\": this.loading,\n        })}\n      >\n        {this.article ? (\n          fullTime(this.article.createdAt())\n        ) : (\n          <span>&nbsp;</span>\n        )}\n      </div>,\n      80\n    );\n\n    if (this.loading) {\n      items.add(\n        \"skeleton\",\n        [0, 1, 2].map(() => (\n          <div>\n            <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\n            <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\n            <p className={\"FlarumBlog-Article-GhostParagraph\"}>&nbsp;</p>\n            <p>&nbsp;</p>\n          </div>\n        )),\n        60\n      );\n    }\n\n    if (!this.loading) {\n      if (this.article.blogMeta?.()?.isPendingReview?.()) {\n        items.add(\n          \"review\",\n          <div className={\"Post-body\"}>\n            <blockquote class=\"uncited\" style={{ fontSize: \"16px\" }}>\n              <div>\n                {icon(\"far fa-clock\", { style: { marginRight: \"5px\" } })}{\" \"}\n                {app.translator.trans(\n                  \"v17development-flarum-blog.forum.review_article.pending_review\"\n                )}\n              </div>\n            </blockquote>\n          </div>,\n          60\n        );\n      }\n\n      if (articlePost) {\n        items.add(\"post\", <CommentPost post={articlePost} />, 40);\n      }\n    }\n\n    return items;\n  }\n\n  contentItems() {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${app.forum.attribute(\"baseUrl\")}/assets/${app.forum.attribute(\n          \"blogDefaultImage\"\n        )})`\n      : null;\n\n    const blogImage = this.article?.blogMeta()?.featuredImage?.()\n      ? `url(${this.article.blogMeta().featuredImage()})`\n      : defaultImage;\n\n    const items = new ItemList();\n\n    items.add(\n      \"image\",\n      <div\n        className={classList(\n          \"FlarumBlog-Article-Image FlarumBlog-default-image\",\n          { \"FlarumBlog-Article-GhostImage\": this.loading }\n        )}\n        style={{\n          backgroundImage: blogImage,\n          opacity: this.article?.isHidden?.() ? 0.4 : null,\n        }}\n      />,\n      100\n    );\n\n    if (\n      this.article &&\n      (app.session.user?.canEdit?.() ||\n        this.article?.canRename?.() ||\n        this.article?.posts?.()?.[0]?.canEdit?.())\n    ) {\n      items.add(\n        \"editArticle\",\n        <BlogPostController article={this.article} />,\n        80\n      );\n    }\n\n    // Article Categories\n    items.add(\n      \"categories\",\n      <div className=\"FlarumBlog-Article-Categories\">\n        {!this.loading &&\n          this.article\n            ?.tags?.()\n            ?.map((tag) => (\n              <Link href={app.route(\"blogCategory\", { slug: tag.slug() })}>\n                {tag.name()}\n              </Link>\n            ))}\n\n        {this.loading &&\n          [0, 1].map(() => (\n            <span className=\"FlarumBlog-Article-GhostCategory\">Category</span>\n          ))}\n      </div>,\n      60\n    );\n\n    items.add(\n      \"post\",\n      <div className={\"FlarumBlog-Article-Post\"}>\n        {this.postItems().toArray()}\n      </div>,\n      40\n    );\n\n    return items;\n  }\n\n  articleItems() {\n    const items = new ItemList();\n\n    items.add(\n      \"content\",\n      <div className=\"FlarumBlog-Article-Content\">\n        {this.contentItems().toArray()}\n      </div>,\n      100\n    );\n\n    if (\n      !(this?.article?.isLocked?.() || this?.article?.commentCount?.() === 1)\n    ) {\n      items.add(\n        \"comments\",\n        <div className={\"FlarumBlog-Article-Comments\"}>\n          {/* Show subscription state */}\n          {!this.loading &&\n            app.session.user &&\n            this.article.subscription &&\n            (!this.article.isLocked ||\n              (this.article.isLocked && !this.article.isLocked())) && (\n              <ArticleSubscription discussion={this.article} />\n            )}\n\n          <h4>\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.comment_section.comments\"\n            )}{\" \"}\n            ({this.article ? this.article.commentCount() - 1 : 0})\n          </h4>\n\n          {/* Locked */}\n          {!this.loading && this.article?.isLocked?.() && (\n            <div className={\"Post-body\"}>\n              <blockquote class=\"uncited\">\n                <div>\n                  <span\n                    className={\"far fa-lock\"}\n                    style={{ marginRight: \"5px\" }}\n                  />{\" \"}\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.comment_section.locked\"\n                  )}\n                </div>\n              </blockquote>\n            </div>\n          )}\n\n          {!this.loading &&\n            this.article &&\n            PostStream.component({\n              discussion: this.article,\n              stream: this.stream,\n              onPositionChange: this.positionChanged.bind(this),\n            })}\n        </div>,\n        75\n      );\n    }\n\n    return items;\n  }\n\n  view() {\n    return (\n      <div className={\"FlarumBlogItem\"}>\n        <div className={\"container\"}>\n          <div className={\"FlarumBlog-ToolButtons\"}>\n            <Link\n              href={app.route(\"blog\")}\n              className={\"Button\"}\n              onclick={(e) => {\n                if (app.previous.matches(BlogOverview)) {\n                  e.preventDefault();\n                  history.back();\n                }\n              }}\n            >\n              <i class=\"icon fas fa-angle-left Button-icon\"></i>\n              <span class=\"Button-label\">\n                {app.translator.trans(\n                  \"v17development-flarum-blog.forum.return_to_overview\"\n                )}\n              </span>\n            </Link>\n          </div>\n          <div className={\"FlarumBlog-Article\"}>\n            <div className={\"FlarumBlog-Article-Container\"}>\n              {this.articleItems().toArray()}\n            </div>\n\n            <BlogItemSidebar article={this.article} loading={this.loading} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  positionChanged(startNumber, endNumber) {\n    const article = this.article;\n\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\n      article.save({ lastReadPostNumber: endNumber });\n      m.redraw();\n    }\n  }\n}\n","import Model from \"flarum/common/Model\";\nimport mixin from \"flarum/common/utils/mixin\";\n\nexport default class BlogMeta extends mixin(Model, {\n  discussion: Model.hasOne(\"discussion\"),\n  featuredImage: Model.attribute(\"featuredImage\"),\n  summary: Model.attribute(\"summary\"),\n  isFeatured: Model.attribute(\"isFeatured\"),\n  isSized: Model.attribute(\"isSized\"),\n  isPendingReview: Model.attribute(\"isPendingReview\"),\n}) {}\n","import { extend } from \"flarum/common/extend\";\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport TagsPage from \"flarum/tags/components/TagsPage\";\n\nexport default function extendTagOverview() {\n  extend(TagsPage.prototype, \"view\", function (markup) {\n    // Pending xhr to load all tags, throw back loading indicator.\n    if (this.loading) {\n      return markup;\n    }\n\n    if (app.forum.attribute(\"blogHideTags\") === false) return markup;\n\n    // Get knowledge base tag ID's\n    const knowledgeBaseTags = app.forum.attribute(\"blogTags\") || [];\n\n    // Get tiles\n    let tag_tiles = markup.children[1].children[1].children[0].children;\n\n    // Map through the tiles and remove tiles that are part of the knowledge base\n    markup.children[1].children[1].children[0].children = tag_tiles.map(\n      (tile, i) => {\n        return knowledgeBaseTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\n      }\n    );\n\n    return markup;\n  });\n\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    if (app.forum.attribute(\"blogHideTags\") === false) return items;\n\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\n\n    blogTags.forEach((id) => {\n      items.remove(`tag${id}`);\n    });\n\n    return items;\n  });\n}\n","export default function () {\n  // Save the original function before we override it\n  const original_discussion_route = app.route.discussion;\n\n  /**\n   * Generate a URL to a discussion OR a Blog Article.\n   *\n   * CORE_CODE_OVERRIDE: This overrides the standard function from flarum/core.\n   * The code is inspired from js/src/forum/routes.js and now handles different types of discussions.\n   * It will try to keep the original function executed if the discussion being\n   * processed isn't a blog article.\n   *\n   * @param {Discussion} discussion\n   * @param {Integer} [near]\n   * @return {String}\n   */\n  app.route.discussion = (discussion, near) => {\n    const discussionRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\n    let shouldRedirect = false;\n    if (discussionRedirectEnabled && discussion.tags().length > 0) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      const foundTags = discussion.tags().filter((tag) => {\n        return (\n          blogTags.indexOf(tag.id()) >= 0 ||\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n        );\n      });\n\n      if (foundTags.length > 0) {\n        shouldRedirect = true;\n      }\n    }\n    if (shouldRedirect) {\n      return discussion.lastReadPostNumber() > 1\n        ? app.route(\"blogArticle.near\", {\n            id: discussion.slug(),\n            near: discussion.lastReadPostNumber(),\n          })\n        : app.route(\"blogArticle\", {\n            id: discussion.slug(),\n          });\n    } else {\n      return original_discussion_route(discussion, near);\n    }\n  };\n}\n","import Component from \"flarum/common/Component\";\n\nexport default class ComposerPreview extends Component {\n  view() {\n    return <div />;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    s9e.TextFormatter.preview(vnode.attrs.content || \"\", vnode.dom);\n  }\n}\n","import ComposerBody from \"flarum/forum/components/ComposerBody\";\nimport Button from \"flarum/common/components/Button\";\nimport TextEditor from \"flarum/common/components/TextEditor\";\nimport ComposerPreview from \"./ComposerPreview\";\nimport app from \"flarum/forum/app\";\n\nexport default class Composer extends ComposerBody {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.previewContent = false;\n  }\n\n  // Render\n  view() {\n    const hasContent =\n      this.composer.fields.content() && this.composer.fields.content() !== \"\";\n    const loading = this.loading || this.attrs.disabled;\n\n    return (\n      <div\n        className={`Flarum-Blog-Composer ${\n          loading ? \"Flarum-Blog-Composer-Loading\" : \"\"\n        }`}\n      >\n        <div className={\"Flarum-Blog-Composer-tabs\"}>\n          <Button\n            className={!this.previewContent && \"AricleComposerButtonSelected\"}\n            onclick={() => (this.previewContent = false)}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.composer.write\"\n            )}\n          </Button>\n          <Button\n            className={this.previewContent && \"AricleComposerButtonSelected\"}\n            onclick={() => (this.previewContent = true)}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.composer.view\"\n            )}\n          </Button>\n        </div>\n\n        <div\n          className={`Composer Flarum-Blog-Composer-body ${\n            this.previewContent ? \"Flarum-Blog-Composer-HideEditor\" : \"\"\n          }`}\n        >\n          {this.previewContent && (\n            <div className={\"Flarum-Blog-Composer-preview\"}>\n              {!hasContent &&\n                app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.nothing_to_preview\"\n                )}\n\n              <ComposerPreview content={this.composer.fields.content()} />\n            </div>\n          )}\n\n          {TextEditor.component({\n            submitLabel:\n              this.attrs.submitLabel ||\n              app.translator.trans(\"core.forum.composer_edit.submit_button\"),\n            placeholder: this.attrs.placeholder,\n            disabled: loading,\n            composer: this.composer,\n            preview: this.jumpToPreview && this.jumpToPreview.bind(this),\n            onchange: this.composer.fields.content,\n            onsubmit: this.onsubmit.bind(this),\n            value: this.composer.fields.content(),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  // Submit trigger\n  onsubmit() {\n    if (this.attrs.onsubmit) {\n      this.attrs.onsubmit();\n    }\n  }\n}\n","import app from \"flarum/forum/app\";\nimport Page from \"flarum/common/components/Page\";\nimport Button from \"flarum/common/components/Button\";\nimport Link from \"flarum/common/components/Link\";\nimport BlogAuthor from \"../components/BlogItemSidebar/BlogAuthor\";\nimport RenameArticleModal from \"../components/Modals/RenameArticleModal\";\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\nimport BlogPostSettingsModal from \"../components/Modals/BlogPostSettingsModal\";\nimport Composer from \"../components/Composer/Composer\";\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\nimport ItemList from \"flarum/common/utils/ItemList\";\n\nexport default class BlogComposer extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    // User cannot write blogs\n    if (!app.forum.attribute(\"canWriteBlogPosts\")) {\n      m.route.set(app.route(\"blog\"));\n      return;\n    }\n\n    // Send history push\n    app.history.push(\"blogComposer\");\n\n    // Get languages (if enabled)\n    this.languages = app.store.all(\"discussion-languages\") || [];\n\n    // Set body class\n    this.bodyClass = \"BlogItemPage BlogItemPage--composer\";\n\n    // Article data\n    this.articleLanguage = m.route.param(\"lang\")\n      ? m.route.param(\"lang\")\n      : app.translator.locale;\n    this.article = app.store.createRecord(\"discussions\");\n    this.blogMeta = null;\n\n    this.tags = [];\n\n    // Pre-select tags\n    if (m.route.param().tags) {\n      const tagList = Array.isArray(m.route.param().tags)\n        ? m.route.param().tags\n        : m.route.param().tags.split(\",\");\n\n      if (m.route.param().tags.length > 0) {\n        tagList.forEach((tagId) => {\n          const foundTag = app.store.getById(\"tags\", tagId);\n\n          if (foundTag) {\n            this.tags.push(foundTag);\n          }\n        });\n      }\n    }\n\n    this.isSaving = false;\n  }\n\n  openTagsModal(e = null) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (this.isSaving) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: this.tags,\n      onsubmit: (tags) => {\n        this.tags = tags;\n      },\n    });\n  }\n\n  openNameArticleModal(e = null) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (this.isSaving) return;\n\n    app.modal.show(RenameArticleModal, {\n      article: this.article,\n      onChange: (title) => {\n        this.article.pushData({\n          attributes: {\n            title,\n          },\n        });\n      },\n    });\n  }\n\n  openBlogSettings(e) {\n    e.preventDefault();\n\n    if (this.isSaving) return;\n\n    app.modal.show(BlogPostSettingsModal, {\n      meta: this.blogMeta,\n      onsubmit: (meta) => (this.blogMeta = meta),\n    });\n  }\n\n  view() {\n    return (\n      <div className={\"FlarumBlogItem\"}>\n        <div className={\"container\"}>{this.pageItems().toArray()}</div>\n      </div>\n    );\n  }\n\n  pageItems() {\n    const items = new ItemList();\n\n    items.add(\n      \"toolButtons\",\n      <div className=\"FlarumBlog-ToolButtons\">\n        <Link\n          href={app.route(\"blog\")}\n          className=\"Button\"\n          loading={this.isSaving}\n          icon=\"fas fa-angle-left\"\n        >\n          <i class=\"icon fas fa-angle-left Button-icon\" />\n          <span class=\"Button-label\">\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.return_to_overview\"\n            )}\n          </span>\n        </Link>\n      </div>,\n      100\n    );\n\n    items.add(\n      \"article\",\n      <div className={\"FlarumBlog-Article\"}>\n        {this.articleWrapperItems().toArray()}\n      </div>,\n      90\n    );\n\n    return items;\n  }\n\n  articleWrapperItems() {\n    const items = new ItemList();\n\n    items.add(\n      \"container\",\n      <div className=\"FlarumBlog-Article-Container\">\n        {this.articleItems().toArray()}\n      </div>,\n      100\n    );\n\n    items.add(\n      \"sidebar\",\n      <div className=\"FlarumBlog-Article-Sidebar\">\n        <BlogAuthor user={app.session.user} />\n      </div>,\n      90\n    );\n\n    return items;\n  }\n\n  articleItems() {\n    const items = new ItemList();\n\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n\n    const blogImage =\n      this.blogMeta && this.blogMeta.featuredImage()\n        ? `url(${this.blogMeta.featuredImage()})`\n        : defaultImage;\n\n    items.add(\n      \"content\",\n      <div className=\"FlarumBlog-Article-Content\">\n        <div\n          className={`FlarumBlog-Article-Image FlarumBlog-default-image`}\n          style={{\n            backgroundImage: blogImage,\n            cursor: \"pointer\",\n          }}\n          onclick={(e) => this.openBlogSettings(e)}\n        />\n\n        <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\n          <div\n            className={\n              this.languages.length === 0\n                ? \"FlarumBlog-Article-Content-Edit-Dropdown\"\n                : \"FlarumBlog-Article-Content-EditButtons\"\n            }\n          >\n            {this.languages !== null && this.languages.length >= 1 && (\n              <LanguageDropdown\n                selected={this.articleLanguage}\n                onclick={(language) => (this.articleLanguage = language)}\n              />\n            )}\n\n            <Button\n              className={\"Button\"}\n              onclick={(e) => this.openBlogSettings(e)}\n              icon={\"fas fa-pencil-alt\"}\n              loading={this.isSaving}\n            >\n              {app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.update_settings\"\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {/* Article Categories */}\n        <div className={\"FlarumBlog-Article-Categories\"}>\n          {this.tags.map((tag) => (\n            <button\n              class=\"Button Button--text\"\n              onclick={(e) => this.openTagsModal(e)}\n            >\n              {tag.name()}\n            </button>\n          ))}\n\n          <button\n            class=\"Button Button--text\"\n            onclick={(e) => this.openTagsModal(e)}\n          >\n            {this.tags.length === 0\n              ? app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.select_category\"\n                )\n              : app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.edit_categories\"\n                )}{\" \"}\n            <i className={\"fas fa-edit\"} />\n          </button>\n        </div>\n\n        <div className={\"FlarumBlog-Article-Post\"}>\n          {/* Article name */}\n          <h3\n            onclick={() => this.openNameArticleModal()}\n            className=\"FlarumBlog-Article-Title\"\n            style={{ cursor: \"pointer\" }}\n          >\n            {this.article && this.article.title() && this.article.title() !== \"\"\n              ? this.article.title()\n              : app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.no_title\"\n                )}\n\n            <button\n              class=\"Button Button--text\"\n              onclick={(e) => e.preventDefault()}\n            >\n              <i className={\"fas fa-edit\"} />\n            </button>\n          </h3>\n\n          <div className=\"Post-body\">\n            <Composer\n              composer={app.composer}\n              originalContent={\"\"}\n              submitLabel={app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.post_article\"\n              )}\n              placeholder={app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.enter_message_here\"\n              )}\n              onsubmit={() => this.create()}\n              disabled={this.isSaving}\n            />\n          </div>\n        </div>\n      </div>,\n      100\n    );\n\n    items.add(\n      \"commentsPlaceholder\",\n      <div className=\"FlarumBlog-Article-Comments\">\n        <h4>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.comment_section.comments\"\n          )}{\" \"}\n          (0)\n        </h4>\n        {/* Locked */}\n\n        <div className=\"Post-body\">\n          <blockquote class=\"uncited\">\n            <div>\n              <span className=\"fas fa-ban\" style={{ marginRight: \"5px\" }} />{\" \"}\n              {app.translator.trans(\n                \"v17development-flarum-blog.forum.composer.comment_section\"\n              )}\n            </div>\n          </blockquote>\n        </div>\n      </div>,\n      90\n    );\n\n    return items;\n  }\n\n  create() {\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\n\n    // Force tags\n    if (this.tags.length === 0) {\n      this.openTagsModal();\n      return;\n    }\n\n    // Force title\n    if (!this.article.title() || this.article.title() === \"\") {\n      this.openNameArticleModal();\n      return;\n    }\n\n    // Find knowledge base tags\n    const findblogTags = this.tags.filter((tag) => {\n      return blogTags.indexOf(tag.id()) >= 0;\n    });\n\n    // No knowledge base tags selected\n    if (findblogTags.length === 0) {\n      alert(\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.composer.no_blog_tags_selected\"\n        )\n      );\n      return;\n    }\n\n    if (\n      (this.blogMeta === null ||\n        (!this.blogMeta.featuredImage() &&\n          !app.forum.attribute(\"blogDefaultImage\")) ||\n        !this.blogMeta.summary()) &&\n      !confirm(\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.composer.post_without_blog_info\"\n        )\n      )\n    ) {\n      return;\n    }\n\n    let relationships = {\n      tags: this.tags,\n    };\n\n    // Add languages if possible\n    if (this.languages.length > 0) {\n      relationships.language = app.store.getBy(\n        \"discussion-languages\",\n        \"code\",\n        this.articleLanguage\n      );\n    }\n\n    const data = {\n      title: this.article.title(),\n      content: app.composer.fields.content(),\n      relationships,\n      blogMeta:\n        this.blogMeta !== null\n          ? {\n              featuredImage: this.blogMeta.featuredImage(),\n              summary: this.blogMeta.summary(),\n              isSized: this.blogMeta.isSized(),\n            }\n          : null,\n    };\n\n    this.isSaving = true;\n\n    this.article\n      .save(data)\n      .then((article) => {\n        setTimeout(() => {\n          // Redirect to the article\n          m.route.set(app.route(\"blogArticle\", { id: `${article.slug()}` }));\n        }, 500);\n      })\n      .catch(() => {\n        this.isSaving = false;\n        m.redraw();\n      });\n  }\n}\n","import { extend } from \"flarum/common/extend\";\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport LinkButton from \"flarum/common/components/LinkButton\";\n\nexport default function addSidebarNav() {\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    if (\n      app.forum.attribute(\"blogAddSidebarNav\") &&\n      app.forum.attribute(\"blogAddSidebarNav\") !== \"0\"\n    ) {\n      items.add(\n        \"blog\",\n        <LinkButton icon=\"fas fa-comment\" href={app.route(\"blog\")}>\n          {app.translator.trans(\"v17development-flarum-blog.forum.blog\")}\n        </LinkButton>,\n        15\n      );\n    }\n\n    return items;\n  });\n}\n","import BlogItem from \"./pages/BlogItem\";\nimport Model from \"flarum/common/Model\";\nimport Tag from \"flarum/tags/models/Tag\";\nimport Discussion from \"flarum/common/models/Discussion\";\nimport BlogOverview from \"./pages/BlogOverview\";\nimport redirector from \"./utils/redirector\";\nimport BlogMeta from \"../common/Models/BlogMeta\";\nimport extendTagOverview from \"./utils/extendTagOverview\";\nimport discussionRouting from \"./utils/discussionRouting\";\nimport BlogComposer from \"./pages/BlogComposer\";\nimport compat from \"./compat\";\nimport addSidebarNav from \"./utils/addSidebarNav\";\nimport app from \"flarum/forum/app\";\n\n// Register Flarum Blog\napp.initializers.add(\n  \"v17development-flarum-blog\",\n  (app) => {\n    app.routes.blog = { path: \"/blog\", component: BlogOverview };\n\n    app.routes.blogCategory = {\n      path: \"/blog/category/:slug\",\n      component: BlogOverview,\n    };\n\n    app.routes.blogComposer = {\n      path: \"/blog/compose\",\n      component: BlogComposer,\n    };\n\n    app.routes.blogArticle = { path: \"/blog/:id\", component: BlogItem };\n\n    app.routes[\"blogArticle.near\"] = {\n      path: \"/blog/:id/:near\",\n      component: BlogItem,\n    };\n\n    app.store.models.blogMeta = BlogMeta;\n\n    Discussion.prototype.blogMeta = Model.hasOne(\"blogMeta\");\n    Tag.prototype.isBlog = Model.attribute(\"isBlog\");\n\n    // Redirect discussions/tags to their blog post/overview\n    redirector();\n\n    // Extend tag overview.\n    // Hide tags which are used as blog category\n    extendTagOverview();\n\n    // Make that blog articles have a blog route and not a discussion route\n    discussionRouting();\n\n    // Add a link to the blog to the IndexPage sidebar, if enabled.\n    addSidebarNav();\n  },\n  -100000\n);\n\ncompat();\n","import IndexPage from \"flarum/forum/components/IndexPage\";\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\";\nimport { extend, override } from \"flarum/common/extend\";\nimport app from \"flarum/forum/app\";\n\nexport default function () {\n  // Redirect tag to blog category\n  extend(IndexPage.prototype, \"oncreate\", function () {\n    const tag = this.currentTag();\n    const tagRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"tags_only\";\n\n    // Only trigger when it's a tag page and the redirects are enabled\n    if (tag && tagRedirectEnabled) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      // Tag is inside list\n      if (\n        blogTags.indexOf(tag.id()) >= 0 ||\n        (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n      ) {\n        m.route.set(app.route(\"blog\"));\n      }\n    }\n  });\n\n  // Redirect discussion to blog article\n  override(DiscussionPage.prototype, \"show\", function (original, discussion) {\n    const discussionRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\n\n    if (\n      discussionRedirectEnabled &&\n      discussion &&\n      discussion &&\n      discussion.tags().length > 0\n    ) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      const foundTags = discussion.tags().filter((tag) => {\n        return (\n          blogTags.indexOf(tag.id()) >= 0 ||\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n        );\n      });\n\n      // Only redirect if the discussion has blog tags\n      if (foundTags.length > 0) {\n        // Redirect to blog article\n        const url = app.route(\"blogArticle\", {\n          id: discussion.slug(),\n        });\n\n        m.route.set(url, null, { replace: true });\n\n        return null;\n      }\n    }\n\n    return original(discussion);\n  });\n}\n","import { compat } from \"@flarum/core/forum\";\nimport BlogAuthor from \"./components/BlogItemSidebar/BlogAuthor\";\nimport BlogItemSidebar from \"./components/BlogItemSidebar/BlogItemSidebar\";\nimport BlogPostController from \"./components/BlogPostController\";\nimport ForumNav from \"./components/ForumNav\";\nimport BlogItem from \"./pages/BlogItem\";\nimport BlogOverview from \"./pages/BlogOverview\";\n\nexport default () => {\n  Object.assign(compat, {\n    \"v17development/blog/components/BlogItemSidebar\": BlogItemSidebar,\n    \"v17development/blog/components/BlogAuthor\": BlogAuthor,\n    \"v17development/blog/components/ForumNav\": ForumNav,\n    \"v17development/blog/components/BlogPostController\": BlogPostController,\n    \"v17development/blog/pages/BlogItem\": BlogItem,\n    \"v17development/blog/pages/BlogOverview\": BlogOverview,\n  });\n};\n"],"sourceRoot":""}